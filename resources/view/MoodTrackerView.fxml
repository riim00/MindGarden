<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.DropShadow?>
<?import java.lang.String?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="mindgarden.controller.MoodTrackerViewController"
            prefHeight="700.0" prefWidth="900.0"
            style="-fx-background-color: linear-gradient(to bottom, #e3f2fd, #ffffff);">

    <!-- Header -->
    <top>
        <VBox>
            <!-- Navigation Bar -->
            <HBox alignment="CENTER_LEFT" spacing="15"
                  style="-fx-background-color: linear-gradient(to right, #90caf9, #bbdefb); -fx-padding: 15 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 2);">

                <Button fx:id="backButton" onAction="#goBack"
                        style="-fx-background-color: transparent; -fx-text-fill: #1565c0; -fx-font-weight: bold; -fx-font-size: 14; -fx-padding: 8 15;">
                    <graphic>
                        <Text text="â†" style="-fx-font-size: 18;"/>
                    </graphic>
                    <HBox.margin>
                        <Insets right="10"/>
                    </HBox.margin>
                </Button>

                <HBox alignment="CENTER" spacing="10">
                    <Text text="ðŸ˜Š" style="-fx-font-size: 24;"/>
                    <Label text="Mood Tracker" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1565c0;">
                        <font>
                            <Font name="Verdana Bold" size="24.0"/>
                        </font>
                    </Label>
                </HBox>

                <Region HBox.hgrow="ALWAYS"/>

                <Button fx:id="calendarButton" text="ðŸ“…"
                        style="-fx-background-color: transparent; -fx-font-size: 18;"/>

                <Button fx:id="settingsButton" text="âš™ï¸"
                        style="-fx-background-color: transparent; -fx-font-size: 18;"/>
            </HBox>

            <!-- Time View Tabs -->
            <HBox alignment="CENTER" spacing="10" style="-fx-background-color: #f5f8fa; -fx-padding: 10; -fx-border-color: #e0e0e0; -fx-border-width: 0 0 1 0;">
                <ToggleButton text="Daily" selected="true"
                              style="-fx-background-color: #e3f2fd; -fx-text-fill: #1565c0; -fx-font-weight: bold; -fx-background-radius: 20; -fx-padding: 8 20;"/>
                <ToggleButton text="Weekly"
                              style="-fx-background-color: transparent; -fx-text-fill: #5f6368; -fx-background-radius: 20; -fx-padding: 8 20;"/>
                <ToggleButton text="Monthly"
                              style="-fx-background-color: transparent; -fx-text-fill: #5f6368; -fx-background-radius: 20; -fx-padding: 8 20;"/>
                <ToggleButton text="Yearly"
                              style="-fx-background-color: transparent; -fx-text-fill: #5f6368; -fx-background-radius: 20; -fx-padding: 8 20;"/>
            </HBox>
        </VBox>
    </top>

    <!-- Main Content -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-padding: 0;">
            <VBox alignment="TOP_CENTER" spacing="30" style="-fx-padding: 40;">

                <!-- Date Display -->
                <HBox alignment="CENTER">
                    <Label text="Friday, April 25, 2025"
                           style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: #3c4043;"/>
                </HBox>

                <!-- Mood Selection Card -->
                <VBox alignment="CENTER" spacing="25"
                      style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 30; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 3);"
                      maxWidth="800">

                    <Label text="How are you feeling today?"
                           style="-fx-font-size: 22; -fx-font-weight: bold; -fx-text-fill: #1565c0;"/>

                    <!-- Mood Selection -->
                    <HBox alignment="CENTER" spacing="20">
                        <VBox alignment="CENTER" spacing="10"
                              style="-fx-background-color: #ffebee; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 5, 0, 0, 2);"
                              onMouseClicked="#selectMood">
                            <Label text="ðŸ˜" style="-fx-font-size: 40;"/>
                            <Label text="Excellent" style="-fx-font-weight: bold; -fx-text-fill: #c62828;"/>
                        </VBox>

                        <VBox alignment="CENTER" spacing="10"
                              style="-fx-background-color: #fff8e1; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 5, 0, 0, 2);"
                              onMouseClicked="#selectMood">
                            <Label text="ðŸ˜Š" style="-fx-font-size: 40;"/>
                            <Label text="Happy" style="-fx-font-weight: bold; -fx-text-fill: #ff8f00;"/>
                        </VBox>

                        <VBox alignment="CENTER" spacing="10"
                              style="-fx-background-color: #e8f5e9; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 5, 0, 0, 2);"
                              onMouseClicked="#selectMood">
                            <Label text="ðŸ˜" style="-fx-font-size: 40;"/>
                            <Label text="Neutral" style="-fx-font-weight: bold; -fx-text-fill: #388e3c;"/>
                        </VBox>

                        <VBox alignment="CENTER" spacing="10"
                              style="-fx-background-color: #e1f5fe; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 5, 0, 0, 2);"
                              onMouseClicked="#selectMood">
                            <Label text="ðŸ˜”" style="-fx-font-size: 40;"/>
                            <Label text="Sad" style="-fx-font-weight: bold; -fx-text-fill: #0288d1;"/>
                        </VBox>

                        <VBox alignment="CENTER" spacing="10"
                              style="-fx-background-color: #ede7f6; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 5, 0, 0, 2);"
                              onMouseClicked="#selectMood">
                            <Label text="ðŸ˜¡" style="-fx-font-size: 40;"/>
                            <Label text="Angry" style="-fx-font-weight: bold; -fx-text-fill: #7b1fa2;"/>
                        </VBox>
                    </HBox>

                    <!-- Secondary Emotions -->
                    <VBox spacing="10" alignment="CENTER">
                        <Label text="Want to be more specific?" style="-fx-font-size: 14; -fx-text-fill: #5f6368;"/>
                        <HBox alignment="CENTER" spacing="10">
                            <ComboBox fx:id="secondaryEmotionCombo" promptText="Select a specific emotion"
                                      style="-fx-background-color: #f5f8fa; -fx-background-radius: 20;">
                                <!-- These would be populated based on primary emotion selection -->
                            </ComboBox>

                            <Button text="Add"
                                    style="-fx-background-color: #e3f2fd; -fx-text-fill: #1565c0; -fx-background-radius: 20; -fx-padding: 5 15;"/>
                        </HBox>
                    </VBox>

                    <Separator style="-fx-background-color: #e0e0e0;"/>

                    <!-- Mood Factors -->
                    <VBox spacing="15" alignment="CENTER_LEFT" maxWidth="650">
                        <Label text="What factors influenced your mood today?"
                               style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #3c4043;"/>

                        <HBox spacing="10" alignment="CENTER">
                            <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                <CheckBox text="Sleep" style="-fx-text-fill: #5f6368;"/>
                            </VBox>
                            <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                <CheckBox text="Exercise" style="-fx-text-fill: #5f6368;"/>
                            </VBox>
                            <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                <CheckBox text="Nutrition" style="-fx-text-fill: #5f6368;"/>
                            </VBox>
                            <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                <CheckBox text="Social" style="-fx-text-fill: #5f6368;"/>
                            </VBox>
                            <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                <CheckBox text="Work" style="-fx-text-fill: #5f6368;"/>
                            </VBox>
                        </HBox>
                    </VBox>

                    <!-- Notes Section -->
                    <VBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Add notes about your mood:"
                               style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #3c4043;"/>
                        <TextArea fx:id="moodNotes" prefHeight="100"
                                  promptText="How was your day? What influenced your mood? Any specific events or thoughts?"
                                  style="-fx-background-color: #f5f8fa; -fx-background-radius: 10;"
                                  wrapText="true"/>
                    </VBox>

                    <!-- Energy Level Slider -->
                    <VBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Energy level:"
                               style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #3c4043;"/>

                        <HBox alignment="CENTER" spacing="10">
                            <Label text="Low" style="-fx-text-fill: #5f6368;"/>
                            <Slider fx:id="energySlider" min="1" max="10" value="5"
                                    showTickMarks="true" showTickLabels="true"
                                    majorTickUnit="1" minorTickCount="0"
                                    HBox.hgrow="ALWAYS"/>
                            <Label text="High" style="-fx-text-fill: #5f6368;"/>
                        </HBox>
                    </VBox>

                    <!-- Action Buttons -->
                    <HBox alignment="CENTER_RIGHT" spacing="15">
                        <Label fx:id="selectedMoodLabel" text="Selected: None"
                               style="-fx-font-size: 14; -fx-text-fill: #5f6368;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Cancel"
                                style="-fx-background-color: transparent; -fx-text-fill: #5f6368; -fx-background-radius: 20; -fx-padding: 10 25;"/>
                        <Button text="Save Entry" onAction="#saveMoodEntry"
                                style="-fx-background-color: #1976d2; -fx-text-fill: white; -fx-background-radius: 20; -fx-padding: 10 25; -fx-font-weight: bold;">
                            <graphic>
                                <Text text="ðŸ’¾" style="-fx-font-size: 14;"/>
                            </graphic>
                            <effect>
                                <DropShadow color="#bbdefb" radius="5" spread="0.1"/>
                            </effect>
                        </Button>
                    </HBox>
                </VBox>

                <!-- Mood Analysis Section -->
                <VBox spacing="20" maxWidth="800">
                    <Label text="Your Mood Patterns"
                           style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: #3c4043;"/>

                    <!-- Charts Section -->
                    <HBox spacing="20" alignment="CENTER">
                        <!-- Mood Distribution -->
                        <VBox spacing="15" alignment="CENTER_LEFT"
                              style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);"
                              maxWidth="380" HBox.hgrow="ALWAYS">
                            <Label text="Mood Distribution"
                                   style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #1565c0;"/>
                            <PieChart fx:id="moodPieChart" prefHeight="220"
                                      legendVisible="true" labelsVisible="false"
                                      style="-fx-pie-label-visible: false; -fx-legend-side: right;"/>
                        </VBox>

                        <!-- Mood Trend -->
                        <VBox spacing="15" alignment="CENTER_LEFT"
                              style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);"
                              maxWidth="380" HBox.hgrow="ALWAYS">
                            <Label text="Mood Trend (Last 7 Days)"
                                   style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #1565c0;"/>
                            <LineChart fx:id="moodTrendChart" prefHeight="220"
                                       legendVisible="false" createSymbols="true" animated="false">
                                <xAxis>
                                    <CategoryAxis side="BOTTOM" />
                                </xAxis>
                                <yAxis>
                                    <NumberAxis side="LEFT" label="Mood Level"
                                                autoRanging="false" lowerBound="1" upperBound="5" tickUnit="1"/>
                                </yAxis>
                            </LineChart>
                        </VBox>
                    </HBox>

                    <!-- Mood History -->
                    <VBox spacing="15" alignment="CENTER_LEFT"
                          style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                        <HBox alignment="CENTER_LEFT">
                            <Label text="Mood History"
                                   style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #1565c0;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <ComboBox promptText="Filter"
                                      style="-fx-background-color: #f5f8fa; -fx-background-radius: 15;"/>
                        </HBox>

                        <ListView fx:id="moodHistoryList" prefHeight="150"
                                  style="-fx-background-color: #f5f8fa; -fx-background-radius: 10;"/>

                        <HBox alignment="CENTER_RIGHT">
                            <Button text="View Full History"
                                    style="-fx-background-color: transparent; -fx-text-fill: #1976d2; -fx-font-weight: bold;">
                                <graphic>
                                    <Text text="â†’" style="-fx-font-size: 14;"/>
                                </graphic>
                            </Button>
                        </HBox>
                    </VBox>
                </VBox>

                <!-- Wellness Tips -->
                <VBox spacing="15" alignment="CENTER"
                      style="-fx-background-color: #e3f2fd; -fx-background-radius: 15; -fx-padding: 25; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 8, 0, 0, 2);"
                      maxWidth="800">
                    <Label text="ðŸ’¡ Tips for Emotional Wellbeing"
                           style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #1565c0;"/>

                    <HBox spacing="25">
                        <VBox spacing="10" alignment="CENTER" HBox.hgrow="ALWAYS">
                            <Label text="ðŸ§˜" style="-fx-font-size: 24;"/>
                            <Label text="Practice mindfulness daily"
                                   style="-fx-font-weight: bold; -fx-text-fill: #3c4043;"/>
                            <Label text="Even just 5 minutes can reduce stress and improve focus"
                                   wrapText="true" textAlignment="CENTER" style="-fx-text-fill: #5f6368;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" HBox.hgrow="ALWAYS">
                            <Label text="ðŸ‘¥" style="-fx-font-size: 24;"/>
                            <Label text="Stay socially connected"
                                   style="-fx-font-weight: bold; -fx-text-fill: #3c4043;"/>
                            <Label text="Reach out to friends or family when you need support"
                                   wrapText="true" textAlignment="CENTER" style="-fx-text-fill: #5f6368;"/>
                        </VBox>

                        <VBox spacing="10" alignment="CENTER" HBox.hgrow="ALWAYS">
                            <Label text="ðŸ’¤" style="-fx-font-size: 24;"/>
                            <Label text="Prioritize good sleep"
                                   style="-fx-font-weight: bold; -fx-text-fill: #3c4043;"/>
                            <Label text="Quality sleep is essential for mood regulation"
                                   wrapText="true" textAlignment="CENTER" style="-fx-text-fill: #5f6368;"/>
                        </VBox>
                    </HBox>

                    <Button text="View more tips"
                            style="-fx-background-color: transparent; -fx-text-fill: #1976d2; -fx-font-weight: bold;"/>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>

    <!-- Footer -->
    <bottom>
        <VBox alignment="CENTER" spacing="5"
              style="-fx-background-color: linear-gradient(to right, #90caf9, #bbdefb); -fx-padding: 15;">
            <Label text="Tracking your moods helps you understand your emotional patterns"
                   style="-fx-font-size: 14; -fx-font-style: italic; -fx-text-fill: #1565c0;"/>
            <Label text="MindGarden Â© 2025"
                   style="-fx-font-size: 12; -fx-text-fill: #5f6368;"/>
        </VBox>
    </bottom>
</BorderPane>